<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>用户中心 - 智能题目数据库管理系统</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- 状态栏 -->
        <div class="status-bar">
            <div class="status-left">
                <h1><i class="fas fa-graduation-cap"></i> 智能题目数据库管理系统</h1>
            </div>
            <div class="status-right">
                <div class="status-item">
                    <i class="fas fa-user"></i>
                    <span>用户: <strong id="current-username">-</strong></span>
                </div>
                <button class="btn-logout" id="back-to-main">
                    <i class="fas fa-arrow-left"></i> 返回主页
                </button>
            </div>
        </div>

        <!-- 用户中心内容 -->
        <div class="profile-container">
            <div class="card">
                <h2><i class="fas fa-user-circle"></i> 用户中心</h2>
                
                <!-- 标签页导航 -->
                <nav class="profile-tabs">
                    <button class="profile-tab active" data-tab="info">
                        <i class="fas fa-info-circle"></i> 基本信息
                    </button>
                    <button class="profile-tab" data-tab="exports">
                        <i class="fas fa-history"></i> 导出记录
                    </button>
                </nav>

                <!-- 基本信息标签页 -->
                <div id="info-tab" class="profile-tab-content active">
                    <div class="profile-info">
                        <h3><i class="fas fa-user"></i> 个人信息</h3>
                        <div class="info-grid">
                            <div class="info-item">
                                <label>用户名</label>
                                <span id="profile-username">-</span>
                            </div>
                            <div class="info-item">
                                <label>邮箱</label>
                                <span id="profile-email">-</span>
                            </div>
                            <div class="info-item">
                                <label>注册时间</label>
                                <span id="profile-created">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="password-reset">
                        <h3><i class="fas fa-key"></i> 修改密码</h3>
                        <form id="password-form">
                            <div class="form-group">
                                <label for="old-password">当前密码</label>
                                <input type="password" id="old-password" name="old_password" required>
                            </div>
                            <div class="form-group">
                                <label for="new-password">新密码</label>
                                <input type="password" id="new-password" name="new_password" required minlength="6">
                            </div>
                            <div class="form-group">
                                <label for="confirm-password">确认新密码</label>
                                <input type="password" id="confirm-password" name="confirm_password" required minlength="6">
                            </div>
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save"></i> 更新密码
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- 导出记录标签页 -->
                <div id="exports-tab" class="profile-tab-content">
                    <div class="exports-header">
                        <h3><i class="fas fa-download"></i> 导出记录</h3>
                        <button id="refresh-exports" class="btn btn-secondary">
                            <i class="fas fa-refresh"></i> 刷新
                        </button>
                    </div>
                    <div id="exports-list" class="exports-list">
                        <!-- 导出记录将在这里显示 -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 重新导出模态框 -->
    <div id="re-export-modal" class="modal">
        <div class="modal-content cart-modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-redo"></i> 重新导出</h3>
                <button class="modal-close" id="re-export-modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div id="re-export-items" class="cart-items">
                    <!-- 重新导出的题目将在这里显示 -->
                </div>
                <div class="cart-actions">
                    <div class="export-options">
                        <h4>导出选项</h4>
                        <div class="form-group">
                            <label for="re-export-title">试卷标题</label>
                            <input type="text" id="re-export-title" class="export-input" placeholder="请输入试卷标题">
                        </div>
                        <div class="form-group">
                            <label>导出模式</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="re-export-mode" value="questions" checked>
                                    <span>仅试题</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="re-export-mode" value="with-answers">
                                    <span>试题 + 解析答案</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>导出格式</label>
                            <div class="radio-group">
                                <label class="radio-item">
                                    <input type="radio" name="re-export-format" value="latex" checked>
                                    <span>LaTeX</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="re-export-format" value="docx">
                                    <span>Word (DOCX)</span>
                                </label>
                                <label class="radio-item">
                                    <input type="radio" name="re-export-format" value="pdf">
                                    <span>PDF</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="cart-buttons">
                        <button type="button" id="re-export-btn" class="btn btn-primary">
                            <i class="fas fa-download"></i> 重新导出
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 加载提示 -->
    <div id="loading" class="loading hidden">
        <div class="loading-spinner"></div>
        <p>处理中...</p>
    </div>

    <!-- 消息提示 -->
    <div id="message" class="message hidden">
        <span id="message-text"></span>
        <button id="message-close">&times;</button>
    </div>

    <script src="/static/profile.js"></script>
</body>
</html>
